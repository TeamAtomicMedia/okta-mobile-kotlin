apply plugin: 'java-platform'
apply plugin: 'com.vanniktech.maven.publish.base'

dependencies {
    constraints {
        project.rootProject.subprojects.forEach { subproject ->
            if (subproject.name != "bom") {
                api(subproject)
            }
        }
    }
}

publishing {
    publications {
        release(MavenPublication) {
            from(project.components["javaPlatform"])
        }
    }
}

tasks.withType(org.jetbrains.kotlin.gradle.tasks.KaptGenerateStubs).configureEach {
    kotlinOptions {
        jvmTarget = "11"
    }
}